# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=mos-regalloc -verify-machineinstrs -o - %s | FileCheck %s
---
name: dead_def
tracksRegLiveness: true
body: |
  bb.0:
    ; CHECK-LABEL: name: dead_def
    ; CHECK: dead $a = LDImm 0, implicit-def $c
    ; CHECK-NEXT: dead $a = LDImm 0, implicit-def $v
    ; CHECK-NEXT: RTS implicit killed $c, implicit killed $v
    %0:gpr = LDImm 0, implicit-def $c
    %1:gpr = LDImm 0, implicit-def $v
    RTS implicit $c, implicit $v
...
---
name: def_use
tracksRegLiveness: true
body: |
  bb.0:
    ; CHECK-LABEL: name: def_use
    ; CHECK: $a = LDImm 0
    ; CHECK-NEXT: STAbs killed $a, 1234
    %0:gpr = LDImm 0
    STAbs %0, 1234
...
---
name: respects_def_rc
tracksRegLiveness: true
body: |
  bb.0:
    ; CHECK-LABEL: name: respects_def_rc
    ; CHECK: $a = LDImm 0
    ; CHECK-NEXT: $rc2 = STImag8 killed $a
    ; CHECK-NEXT: RTS implicit killed $rc2
    %0:gpr = LDImm 0
    %1:imag8 = STImag8 %0
    RTS implicit %1
...
